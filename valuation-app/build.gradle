apply from: "https://raw.githubusercontent.com/anaxo-io/gradle-plugins/master/java/java-plugins.gradle"
apply from: "https://raw.githubusercontent.com/anaxo-io/gradle-plugins/master/java/dependencies.gradle"
apply from: "https://raw.githubusercontent.com/anaxo-io/gradle-plugins/master/java/integration-test.gradle"
apply from: "https://raw.githubusercontent.com/anaxo-io/gradle-plugins/master/java/sonarqube.gradle"

ext.versions += [
        persist         : '0.3.0-SNAPSHOT',
        common          : '0.4.0-SNAPSHOT',
        mapping         : '0.3.0-SNAPSHOT',
        okhttp          : '3.3.1',
        eclipselink     : '2.6.3',
        guice           : '4.0',
        resteasy        : '3.0.20.Final',
        jackson         : '2.8.3',
        metrics         : '3.1.2',
        metricsguice    : '3.1.3',
        neo4j           : '3.0.7',
        neo4jOgm        : '2.1.0',
]

configurations {
    all*.exclude group: 'org.neo4j.3rdparty.javax.ws.rs' , module: 'jsr311-api'
    all*.exclude group: 'javax.ws.rs' , module: 'jsr311-api'
}

dependencies {
    compile("com.acuo.collateral:acuo-persist:${versions.persist}") { changing = true }
    compile("com.acuo.collateral:acuo-common:${versions.common}") { changing = true }
    compile("com.acuo.collateral:acuo-mapping:${versions.mapping}") { changing = true }
    compile(
            "org.codehaus.groovy:groovy-all:2.4.8",
            "com.google.inject:guice:${versions.guice}",
            "com.google.inject.extensions:guice-persist:${versions.guice}",

            "org.eclipse.persistence:eclipselink:${versions.eclipselink}",
            "com.sun.xml.bind:jaxb-xjc:2.2.11",
            "org.apache.poi:poi:3.15",
            "org.apache.poi:poi-ooxml:3.15",

            "org.jboss.resteasy:resteasy-jaxrs:${versions.resteasy}",
            "org.jboss.resteasy:resteasy-guice:${versions.resteasy}",
            "org.jboss.resteasy:resteasy-html:${versions.resteasy}",
            "org.jboss.resteasy:resteasy-jackson2-provider:${versions.resteasy}",
            "org.jboss.resteasy:resteasy-multipart-provider:${versions.resteasy}",

            "com.fasterxml.jackson.datatype:jackson-datatype-jdk8:${versions.jackson}",
            "com.fasterxml.jackson.datatype:jackson-datatype-jsr310:${versions.jackson}",
            "com.fasterxml.jackson.datatype:jackson-datatype-joda:${versions.jackson}",

            "com.smokejumperit.guice:core:1.1",

            "org.apache.velocity:velocity:1.7",

            "org.modelmapper:modelmapper:0.7.5",
            "io.dropwizard.metrics:metrics-core:${versions.metrics}",
            "io.dropwizard.metrics:metrics-jvm:${versions.metrics}",
            "io.dropwizard.metrics:metrics-servlets:${versions.metrics}",
            "com.palominolabs.metrics:metrics-guice:${versions.metricsguice}",
            "org.jasypt:jasypt:1.9.2",

            "com.xebia:jackson-lombok:1.1",
            "org.quartz-scheduler:quartz:2.2.1",
            "org.quartz-scheduler:quartz-jobs:2.2.1"
    )

    testCompile(
            "com.acuo.collateral:acuo-persist:${versions.persist}:tests",
            "com.acuo.collateral:acuo-common:${versions.common}:tests",
            "org.neo4j.test:neo4j-harness:${versions.neo4j}",
            "org.neo4j:neo4j-ogm-test:${versions.neo4jOgm}",
            "com.squareup.okhttp3:mockwebserver:${versions.okhttp}",
            "org.xmlunit:xmlunit-core:2.2.0",
            "org.xmlunit:xmlunit-matchers:2.2.0",
            "net.javacrumbs.json-unit:json-unit:1.12.1",
            "net.javacrumbs.json-unit:json-unit-fluent:1.12.1",
            "com.jayway.jsonpath:json-path-assert:2.2.0",
            "org.meanbean:meanbean:2.0.3",
            "org.apache.poi:poi:3.15",
            "org.apache.poi:poi-ooxml:3.15",
            "nl.jqno.equalsverifier:equalsverifier:2.1.6"
    )
}

apply plugin: 'application'

mainClassName = 'com.acuo.valuation.ValuationApp'
applicationDefaultJvmArgs = ["-Dacuo.config.appid=${config.appId}",
                             "-Dacuo.config.env=${config.env}",
                             "-Dacuo.security.key=${config.key}"]