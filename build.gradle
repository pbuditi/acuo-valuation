buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath 'com.bmuschko:gradle-docker-plugin:3.0.0'
    }
}

task wrapper(type: Wrapper) {
	gradleVersion = '2.14'
}

allprojects {
	repositories {
		jcenter()
		mavenLocal()
		mavenCentral()
		maven {
			url "http://192.168.1.70:8081/repository/maven-public/"
		}
	}
	group = 'com.acuo.collateral'
	version = '0.0.1-SNAPSHOT'
}

def loadConfiguration() {
	def profile = hasProperty('profile') ? profile : 'dev'
	ext.profile = profile
	def configFile = file('config.groovy')
	def config = new ConfigSlurper(profile).parse(configFile.toURI().toURL())
	ext.config = config
}

configure (subprojects) {
	loadConfiguration()
	profile = profile //inject property into sub-project
	config = config     
}